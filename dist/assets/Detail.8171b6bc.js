var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;import{_ as s}from"./NavBar.cc4d1581.js";import{_ as d}from"./GoodList.51c28d47.js";import{r as i,a as u,s as c}from"./index.31d9e266.js";import{n as p,B as m,i as g,p as f,s as v,C as _,T as b,r as h,o as y,e as k,f as C,w as j,z as O,t as w,F as V,k as x}from"./vendor.59df9684.js";const P={components:{NavBar:s,GoodList:d},setup(){const e=p(1),s=m(),d=g();let h=p(0),y=f({detail:{},like_goods:[],comments:[]});v((()=>{h.value=s.query.id,function(e){return i({url:"/api/goods/"+e})}(h.value).then((e=>{console.log(e),y.detail=e.goods,y.comments=e.goods.comments,y.like_goods=e.like_goods}))}));return k=((e,t)=>{for(var a in t||(t={}))n.call(t,a)&&r(e,a,t[a]);if(l)for(var a of l(t))o.call(t,a)&&r(e,a,t[a]);return e})({id:h},_(y)),t(k,a({active:e,handleAddCart:()=>{u({goods_id:y.detail.id,num:1}).then((e=>{204!==e.status&&201!==e.status||(b.success("添加成功"),c.dispatch("updateCart"))}))},goToCart:()=>{u({goods_id:y.detail.id,num:1}).then((e=>{204===e.status||201===e.status?(b.success("添加成功"),c.dispatch("updateCart"),d.push({path:"/shopcart"})):b.error(e.message)})).error((e=>{b.error(e.message)}))}}));var k}},T=O("加入购物车"),z=O("立即购买"),L=C("br",null,null,-1),B=C("br",null,null,-1),U=C("br",null,null,-1),A=C("br",null,null,-1),G=C("br",null,null,-1),H=C("br",null,null,-1),M=C("br",null,null,-1);P.render=function(e,t,a,l,n,o){const r=h("nav-bar"),s=h("van-image"),d=h("van-tag"),i=h("van-button"),u=h("van-card"),c=h("van-tab"),p=h("van-rate"),m=h("good-list"),g=h("van-tabs");return y(),k("div",null,[C(r,null,{default:j((()=>[O("商品详情:"+w(l.id),1)])),_:1}),C(s,{width:"100%","lazy-load":"",src:e.detail.cover_url},null,8,["src"]),C(u,{style:{"text-align":"left"},num:e.detail.stock,price:e.detail.price+".00",desc:e.detail.description,title:e.detail.title},{tags:j((()=>[C(d,{plain:"",type:"danger"},{default:j((()=>[O(w(0==e.detail.is_on?"不上架":"上架"),1)])),_:1}),C(d,{plain:"",type:"danger"},{default:j((()=>[O(w(0==e.detail.is_recommend?"不推荐":"推荐"),1)])),_:1})])),footer:j((()=>[C(i,{size:"warning",onClick:l.handleAddCart},{default:j((()=>[T])),_:1},8,["onClick"]),C(i,{size:"danger",onClick:l.goToCart},{default:j((()=>[z])),_:1},8,["onClick"])])),_:1},8,["num","price","desc","title"]),C(g,{modelValue:l.active,"onUpdate:modelValue":t[1]||(t[1]=e=>l.active=e)},{default:j((()=>[C(c,{title:"标签 1"},{default:j((()=>[C("div",{class:"content",innerHTML:e.detail.details},null,8,["innerHTML"])])),_:1}),C(c,{title:"标签 2"},{default:j((()=>[(y(!0),k(V,null,x(e.comments,(e=>(y(),k("div",{key:e.id,style:{"text-align":"left","padding-left":"20px"}},[C(s,{width:"50",height:"50",src:e.user.avatar_url},null,8,["src"]),C(p,{modelValue:e.rate,"onUpdate:modelValue":t=>e.rate=t},null,8,["modelValue","onUpdate:modelValue"]),L,C("span",null,w(e.content),1),B,C("span",null,w(e.created_at),1),U,A,G,H,M])))),128))])),_:1}),C(c,{title:"标签 3"},{default:j((()=>[C(m,{goods:e.like_goods},null,8,["goods"])])),_:1})])),_:1},8,["modelValue"])])};export default P;
