import{c as t,a as e,N as a,b as r,T as o,d as s,r as n,o as i,e as c,f as d,g as u,w as l,F as m,u as p,h as _,V as h,L as f}from"./vendor.59df9684.js";const E={setIsLogin(t,e){t.user.isLogin=e},addCart(t,e){t.cartCount=e.count}};let g;const A={},b=function(t,e){if(!e)return t();if(void 0===g){const t=document.createElement("link").relList;g=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in A)return;A[t]=!0;const e=t.endsWith(".css"),a=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${a}`))return;const r=document.createElement("link");return r.rel=e?"stylesheet":g,e||(r.as="script",r.crossOrigin=""),r.href=t,document.head.appendChild(r),e?new Promise(((t,e)=>{r.addEventListener("load",t),r.addEventListener("error",e)})):void 0}))).then((()=>t()))},v=()=>b((()=>import("./Home.28276a71.js")),["./assets/Home.28276a71.js","./assets/Home.08ca1f9f.css","./assets/NavBar.cc4d1581.js","./assets/NavBar.ed8fd3b4.css","./assets/vendor.59df9684.js","./assets/better-scroll.esm.c2643e1f.js","./assets/better-scroll.esm.12b05dea.css","./assets/GoodList.51c28d47.js","./assets/GoodList.6f87d239.css"]),L=[{path:"",name:"DefaultHome",component:v,meta:{title:"图书兄弟"}},{path:"/home",name:"Home",component:v,meta:{title:"图书兄弟"}},{path:"/category",name:"Category",component:()=>b((()=>import("./Category.1c28cefb.js")),["./assets/Category.1c28cefb.js","./assets/Category.8f49eb0b.css","./assets/NavBar.cc4d1581.js","./assets/NavBar.ed8fd3b4.css","./assets/vendor.59df9684.js","./assets/better-scroll.esm.c2643e1f.js","./assets/better-scroll.esm.12b05dea.css"]),meta:{title:"图书兄弟-商品分类"}},{path:"/detail",name:"Detail",component:()=>b((()=>import("./Detail.8171b6bc.js")),["./assets/Detail.8171b6bc.js","./assets/Detail.f449501c.css","./assets/NavBar.cc4d1581.js","./assets/NavBar.ed8fd3b4.css","./assets/vendor.59df9684.js","./assets/GoodList.51c28d47.js","./assets/GoodList.6f87d239.css"]),meta:{title:"图书兄弟-商品详情"}},{path:"/profile",name:"Profile",component:()=>b((()=>import("./Profile.70d93e85.js")),["./assets/Profile.70d93e85.js","./assets/Profile.f102a908.css","./assets/NavBar.cc4d1581.js","./assets/NavBar.ed8fd3b4.css","./assets/vendor.59df9684.js","./assets/register.919b7aa3.js"]),meta:{title:"图书兄弟-个人中心",isAuthRequired:!0}},{path:"/shopcart",name:"ShopCart",component:()=>b((()=>import("./ShopCart.c79cef49.js")),["./assets/ShopCart.c79cef49.js","./assets/ShopCart.0734f573.css","./assets/NavBar.cc4d1581.js","./assets/NavBar.ed8fd3b4.css","./assets/vendor.59df9684.js"]),meta:{title:"图书兄弟-购物车",isAuthRequired:!0}},{path:"/register",name:"Register",component:()=>b((()=>import("./Register.b13b66ff.js")),["./assets/Register.b13b66ff.js","./assets/Register.e7858837.css","./assets/NavBar.cc4d1581.js","./assets/NavBar.ed8fd3b4.css","./assets/vendor.59df9684.js","./assets/register.919b7aa3.js"]),meta:{title:"用户注册"}},{path:"/login",name:"Login",component:()=>b((()=>import("./Login.bd2f70ec.js")),["./assets/Login.bd2f70ec.js","./assets/Profile.f102a908.css","./assets/NavBar.cc4d1581.js","./assets/NavBar.ed8fd3b4.css","./assets/vendor.59df9684.js","./assets/register.919b7aa3.js"]),meta:{title:"用户登陆"}},{path:"/address",name:"Address",component:()=>b((()=>import("./Address.ca58175d.js")),["./assets/Address.ca58175d.js","./assets/Address.ed99ddf5.css","./assets/NavBar.cc4d1581.js","./assets/NavBar.ed8fd3b4.css","./assets/vendor.59df9684.js","./assets/address.91855f2c.js"]),meta:{title:"地址管理",isAuthRequired:!0}},{path:"/editaddress",name:"EditAddress",component:()=>b((()=>import("./EditAddress.dbc4b101.js")),["./assets/EditAddress.dbc4b101.js","./assets/Profile.f102a908.css","./assets/NavBar.cc4d1581.js","./assets/NavBar.ed8fd3b4.css","./assets/vendor.59df9684.js","./assets/address.91855f2c.js"]),meta:{title:"新增地址",isAuthRequired:!0}},{path:"/createorder",name:"CreateOrder",component:()=>b((()=>import("./CreateOrder.58fa8f07.js")),["./assets/CreateOrder.58fa8f07.js","./assets/CreateOrder.56e27547.css","./assets/vendor.59df9684.js","./assets/NavBar.cc4d1581.js","./assets/NavBar.ed8fd3b4.css","./assets/order.564af5c1.js"]),meta:{title:"提交订单",isAuthRequired:!0}},{path:"/order",name:"Order",component:()=>b((()=>import("./Order.b95f893b.js")),["./assets/Order.b95f893b.js","./assets/Profile.f102a908.css","./assets/order.564af5c1.js","./assets/register.919b7aa3.js","./assets/NavBar.cc4d1581.js","./assets/NavBar.ed8fd3b4.css","./assets/vendor.59df9684.js"]),meta:{title:"我的订单",isAuthRequired:!0}},{path:"/orderdetail",name:"OrderDetail",component:()=>b((()=>import("./OrderDetail.e047413b.js")),["./assets/OrderDetail.e047413b.js","./assets/Profile.f102a908.css","./assets/order.564af5c1.js","./assets/NavBar.cc4d1581.js","./assets/NavBar.ed8fd3b4.css","./assets/vendor.59df9684.js"]),meta:{title:"订单详情",isAuthRequired:!0}}],R=t({history:e(),routes:L});function O(t){const e=r.create({baseURL:"https://api.shop.eduwork.cn",timeout:5e4});return e.interceptors.request.use((t=>{const e=window.localStorage.getItem("token");return e&&(t.headers.Authorization="Bearer "+e),t}),(t=>{})),e.interceptors.response.use((t=>t.data?t.data:t),(t=>{"401"==t.response.status&&(o.fail("请先登陆"),R.push({path:"/login"})),a(t.response.data.errors.num[0]),a(t.response.data.errors[Object.response.data.errors])})),e(t)}function D(t){return O({url:"/api/carts",method:"post",data:t})}function C(t,e){return O({url:`/api/carts/${t}`,method:"put",data:e})}function P(t){return O({url:"/api/carts/checked",method:"patch",data:t})}function j(t=""){return O({url:"/api/carts?"+t})}function I(t){return O({url:`/api/carts/${t}`,method:"delete"})}R.beforeEach(((t,e,r)=>{if(t.meta.isAuthRequired&&!1===V.state.user.isLogin)return a("您未登陆，请先登录"),r("/login");V.dispatch("updateCart"),r(),document.title=t.meta.title}));const T={updateCart(t){j().then((e=>{t.commit("addCart",{count:e.data.length||0})}))}};var V=s({state:{user:{isLogin:!!window.localStorage.getItem("token")},cartCount:0},mutations:E,actions:T,getters:{}});const k={id:"nav"},q=d("div",{class:"icon"},[d("i",{class:"iconfont icon-shouye"})],-1),w=d("div",null,"首页",-1),y=d("div",{class:"icon"},[d("i",{class:"iconfont icon-caidan"})],-1),S=d("div",null,"分类",-1),$={class:"icon"},H=d("i",{class:"iconfont icon-ziyuan"},null,-1),x=d("div",null,"购物车",-1),z=d("div",{class:"icon"},[d("i",{class:"iconfont icon-user"})],-1),W=d("div",null,"我的",-1);const B=_({setup:t=>(t,e)=>{const a=n("router-view"),r=n("router-link"),o=n("van-badge");return i(),c(m,null,[d(a),u(' <router-view v-slot="{ Component }">\n    <transition>\n      <keep-alive>\n        <component :is="Component" />\n      </keep-alive>\n    </transition>\n  </router-view> '),d("div",k,[d(r,{class:"tab-bar-item",to:"/"},{default:l((()=>[q,w])),_:1}),d(r,{class:"tab-bar-item",to:"/category"},{default:l((()=>[y,S])),_:1}),d(r,{class:"tab-bar-item",to:"/shopcart"},{default:l((()=>[d("div",$,[d(o,{content:p(V).state.cartCount,max:"9"},{default:l((()=>[H])),_:1},8,["content"])]),x])),_:1}),d(r,{class:"tab-bar-item",to:"/profile"},{default:l((()=>[z,W])),_:1})])],64)}});B.use(R),B.use(h),B.use(f,{loading:"./src/assets/images/Welcome.jpg"}),B.mount("#app");export{D as a,P as c,I as d,j as g,C as m,O as r,V as s};
