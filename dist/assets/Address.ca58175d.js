var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;import{_ as d}from"./NavBar.cc4d1581.js";import{i as c,n as l,p as i,s as u,C as p,D as f,T as m,r as h,o as v,e as b,f as y,w as j,F as O,z as A}from"./vendor.59df9684.js";import{g,d as E,e as w}from"./address.91855f2c.js";import"./index.31d9e266.js";const P={components:{NavBar:d},setup(){const e=c();var d=l(0);const h=i({list:[]}),v=()=>{g().then((e=>{e.data.forEach((e=>{e.tel=e.phone,e.addressDetail=e.address,1==e.is_default&&(d.value=e.id)})),h.list=e.data}))};u((()=>{v()}));return b=((e,s)=>{for(var t in s||(s={}))o.call(s,t)&&n(e,t,s[t]);if(a)for(var t of a(s))r.call(s,t)&&n(e,t,s[t]);return e})({},p(h)),s(b,t({onAdd:()=>{e.push({path:"/editaddress"})},onEdit:e=>{f.confirm({title:"删除地址",message:"是否删除该地址？"}).then((()=>{E(e.id).then((e=>{204===e.status?(m.success("删除成功"),v()):m.success("删除失败")}))})).catch((()=>{m.console.error("已取消删除")}))},getAdd:v,onSelect:e=>{const s={name:e.name,address:e.address,phone:e.phone,province:e.province,city:e.city,county:e.county,is_default:1};w(e.id,s).then((e=>{204===e.status&&m.success("已设置为默认收货地址")}))},chosenAddressId:d}));var b}},S=A("地址管理");P.render=function(e,s,t,a,o,r){const n=h("nav-bar"),d=h("van-address-list");return v(),b(O,null,[y(n,null,{default:j((()=>[S])),_:1}),y(d,{modelValue:a.chosenAddressId,"onUpdate:modelValue":s[1]||(s[1]=e=>a.chosenAddressId=e),list:e.list,"default-tag-text":"默认",onAdd:a.onAdd,onEdit:a.onEdit,onSelect:a.onSelect},null,8,["modelValue","list","onAdd","onEdit","onSelect"])],64)};export default P;
